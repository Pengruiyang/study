# 如何设计一个项目
    1. 向需求看齐.深入需求理解业务.考虑实际需要和未来发展.(项目背景、当前业务和其他业务关联及它所处在的位置、用户群体、设设计的业务)
    2. 降低成本. 开发成本、维护成本、时间精力等.让开发过程中只需要专注业务,其他目录、打包、发布、及其他特定功能 (目录构建、自动化构建、基础组件抽离)
    3. 适合解决问题的技术. (pc端还是移动端,或者多端? 用户规模、toB or toC、技术上手成本、满足业务需求、技术本身的稳定性)
# 介绍自己的项目
## 项目背景
    随着公司发展，之前已有的权限中心不能满足现有业务发展。之前权限中心负责配置、校验、授权一个子系统的权限。授权架构采用了租户隔离，组织隔离。每一个权限实体（员工），必须包含于一个租户和组织。接入了有菜单权限、网关权限、数据权限等。
    1. 权限由权限负责人配置权限，业务实际场景复杂，配置需要了解更新多变业务场景。
    2. 之前菜单权限与数据权限统一绑定在用户角色上，部分数据差异导致角色无意义增加，角色越趋累赘。而删除数据时，发现角色和数据交织重复无法彻底删除。

    针对这些问题，
## 基本介绍
* 基础权限: 菜单导航栏 & 二级子路由 & 按钮权限
* 数据权限: 页面上数据展示
## 项目目标
    网上查询了很多相关权限管理项目，但是项目与自身业务息息相关，所以能借鉴的很有限。
## 边界值考虑
    1. 新老项目交替时数据存储问题
    2. 新项目对老项目兼容问题
    3. 新项目数据结构对其他域兼容问题 
## 权限架构和模型
### 老架构
租户层： 谊品生鲜、谊品城配、谊品到家
主体层： 客户    |  商户    |    员工
角色层： 城配客户|  营业部、供应商 |  区长、店长...
系统层： 城配app、城配小程序 | 商户中心、采购中心 | 订单中心、城配后台、数据中心...
权限层： 登录系统、浏览商品、下单.......

### 老模型
```
                                    组织 ==============1： n============== 身份
                                    ||                                  / ||
                                    ||                               /    ||
                                    n：n                         n:n      1:1
                                    ||                          /         ||
                                    ||                        /           ||
租户(生鲜/到家/城配)==1:n==用户==1:n==主体（商户、员工）                角色==n:n==权限
```

## 前端架构部分
### 权限设计了解
1、ABAC设计本质
ABAC设计是为了满足控制请求者在某些条件下是否对请求数据具备某个操作(API)的能力.
### 架构原则
    1. 向需求看齐
    2. 降低成本(目录、打包、发布等)
    3. 合适的解决方案

## 菜单权限
1. 路由权限
    跳转页面时,会去请求当前域拥有的全部菜单权限.不存在则返回当前页面 / 默认页面


# 设计原则
前端抽离组件库原则
## 抽离通用样式组件(样式重构)
1.颗粒度考量.从单一职责原则出发,将组件分为基础/样式组件和容器/符合组件.
一个组件专注的做一件事,尽可能复用组件.
不可以复用的单一职责组件我们就金金作为内部独立组件.
2. 通用性考量 不同于业务组件,内部与业务解耦.参考 Antd 组件设计,将 dom 基本结构控制权全部暴露给使用者,只负责底层逻辑和最基本你的 dom 结构.仅仅只保留默认结构
3. 技术选型 使用 css-in-js 方案, 考虑.jsx 将 js 和 html 整合到组件中,这时,我们从组件维度出发,不分离 css, 组件的样式应当跟着组件走.使用 styled-components.
4. 技术选型 js 依旧保持已有 ts 模式.
5. 打包工具: rollup、webpack、vite,适用性,稳定还是选择了 webpack.
6. 代码检测.eslint 按照之前以后项目开发风格,从公司大家习惯照旧吧.没必要改变.commit 规范同eslint.
### styled-componentds 好处
1. 基于标准 css 预发出发,支持less 嵌套、变量的常用语法.学习成本低
2. 支持全局 css 覆盖
3. 支持自定义 className
4. 当需求需要 css + js 动态组合完成的情况.之后需求变更原先 css 已有的样式变更太麻烦了.

## 开发命令行工具
## 抽离业务组件

      
